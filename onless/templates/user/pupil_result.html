{% extends 'base.html' %}
{% load quiz_tags %}
{% load video_tags %}
{% block content %}
    <div class="row">
        <div class="col-12">
            <p class="lead p-3 text-center" style="font-size: 2rem; color: #2d88bb">O'zlashtirish darajasi {% now "SHORT_DATE_FORMAT" %} holatida</p>
        </div>
    </div>
    <div class="row">
        <!-- left column -->

        <!-- general form elements -->

        <div class="col-md-6 col-sm-12">

            <div class="table-responsive">
                <table class="table">
                    <tbody>
                    {% pupil_result request.user.id as pupil_res %}
                    <tr>
                        <th>Umumiy videolar:</th>
                        {% get_views_count request.user.id as view %}
                        <td>{{ view.videos_count }}</td>
                    </tr>
                    <tr>
                        <th>Ko'rilgan videolar:</th>
                        <td>{{ view.views_count }}</td>
                    </tr>
                      <tr>
                        <th>Ko'rilmagan videolar:</th>
                        <td>{{ view.not_view }}</td>
                    </tr>
                    <tr>
                        <th><a href="#">Onless.uz</a> dagi umumiy savollar:</th>
                        <td>{{ pupil_res.question_total_count }}</td>
                    </tr>
                    <tr>
                        <th>Berilgan javoblar:</th>
                        <td>{{ pupil_res.answer_count }}</td>
                    </tr>
                    <tr>
                        <th>To'g'ri javoblar:</th>
                        <td>{{ pupil_res.answer_true }}</td>
                    </tr>
                      <tr>
                        <th>Noto'g'ri javoblar:</th>
                        <td>{{ pupil_res.answer_false }}</td>
                    </tr>
                    </tbody>
                </table>

            </div>
        </div>

        <div class="col-md-6 col-sm-12 p-3">


            <p class="lead">Berilgan javobga nisbatan o'zlashtirish:</p>

            {% pupil_result request.user.id as pupil_res %}

            <div class="progress">
                {% if pupil_res.answer_count > 0 and pupil_res.res > 0 %}
                    <div class="progress-bar {% if pupil_res.res >= 85 and pupil_res.res <= 100 %}bg-success progress-bar-striped{% elif pupil_res.res >= 40 and pupil_res.res <= 84 %}bg-warning progress-bar-striped{% elif pupil_res.res < 40 %}bg-danger progress-bar-striped{% endif %}"
                         role="progressbar"
                         aria-valuenow="40" aria-valuemin="2"

                         aria-valuemax="6" style="width:{{ pupil_res.res }}%">
                        <b>{{ pupil_res.res }}%</b>
                    </div>
                {% elif pupil_res.answer_count > 0 and pupil_res.res < 1 %}
                    <div style="width: 100%; margin-left: 45%">0%</div>
                {% else %}
                    <div style="margin-left: 10%">yechilmagan</div>
                {% endif %}
            </div>
            <hr>
            <p class="lead p-3">
                Umumiy savollarga nisbatan o'zlashtirish:
            </p>
            <div class="progress">

                {% if pupil_res.question_total_count > 0 and pupil_res.total_res > 0 %}
                    <div class="progress-bar {% if pupil_res.total_res >= 85 and pupil_res.total_res <= 100 %}bg-success progress-bar-striped{% elif pupil_res.total_res >= 40 and pupil_res.total_res <= 84 %}bg-warning progress-bar-striped{% elif pupil_res.total_res < 40 %}bg-danger progress-bar-striped{% endif %}"
                         role="progressbar"
                         aria-valuenow="40" aria-valuemin="2"

                         aria-valuemax="6" style="width:{{ pupil_res.total_res }}%">
                        <b>{{ pupil_res.total_res }}%</b>
                    </div>
                {% elif pupil_res.question_total_count > 0 and pupil_res.total_res < 1 %}
                    <div style="width: 100%; margin-left: 45%">0%</div>
                {% else %}
                    <div style="margin-left: 10%">yechilmagan</div>
                {% endif %}
            </div>

        </div>

    </div>

{% endblock content %}
