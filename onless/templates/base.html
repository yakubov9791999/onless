<!DOCTYPE html>
{% load static %}
<!--
This is a starter template page. Use this page to start your new project from
scratch. This page gets rid of all links and provides the needed markup only.
-->
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="x-ua-compatible" content="ie=edge">

    <title>{% block title %}Onless Online AVTOMAKTAB{% endblock title %}</title>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="{% static 'plugins/fontawesome-free/css/all.min.css' %}">
    <!-- Theme style -->
    <link rel="stylesheet" href="{% static 'css/adminlte.min.css' %}">
    <!-- Google Font: Source Sans Pro -->
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700" rel="stylesheet">


    <link href="https://vjs.zencdn.net/7.8.2/video-js.css" rel="stylesheet"/>

    <!-- If you'd like to support IE8 (for Video.js versions prior to v7) -->
    <script src="https://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>
<style type="text/css">
  .vjs-default-skin .vjs-play-progress,
  .vjs-default-skin .vjs-volume-level { background-color: #59aad7 }
  .vjs-default-skin .vjs-control-bar { font-size: 78% }
</style>
</head>
<body class="hold-transition sidebar-mini">
<div class="wrapper">

    {% include 'inc/navbar.html' %}


    {% include 'inc/sidebar.html' %}


    <!-- Content Wrapper. Contains page content -->
    {% block content %}
        <div class="content-wrapper">

            <!-- Main content -->

            <div class="content">
                <video
                        id="my-video"
                        class="video-js "
                        controls
                        preload="auto"
                        width="640"
                        height="264"
                        poster="https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Shaqi_jrvej.jpg/1200px-Shaqi_jrvej.jpg"
                        data-setup="{}"
                >
                    <source src="/media/quiz/video/2020-05-31/88077464_619654215545643_7164985033194913789_n.mp4"
                            type="video/mp4"/>
                    <source src="/media/quiz/video/2020-05-31/88077464_619654215545643_7164985033194913789_n.mp4"
                            type="video/webm"/>
                    <p class="vjs-no-js">
                        To view this video please enable JavaScript, and consider upgrading to a
                        web browser that
                        <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
                    </p>
                </video>

            </div>

            <!-- /.content -->

        </div>
    {% endblock content %}
    <!-- /.content-wrapper -->

    <!-- Control Sidebar -->
    <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
        <div class="p-3">
            <h5>Title</h5>
            <p>Sidebar content</p>
        </div>
    </aside>
    <!-- /.control-sidebar -->

    {% include 'inc/footer.html' %}
</div>
<!-- ./wrapper -->

<!-- REQUIRED SCRIPTS -->

<!-- jQuery -->
<script src="{% static 'plugins/jquery/jquery.min.js' %}"></script>
<!-- Bootstrap 4 -->
<script src="{% static 'plugins/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
<!-- AdminLTE App -->
<script src="{% static 'js/adminlte.min.js' %}"></script>
<script src="https://vjs.zencdn.net/7.8.2/video.js"></script>
<script>
    var vid = document.getElementById("my-video");

    vid.onloadedmetadata = function () {


        console.log('metadata loaded!');
        console.log(vid.duration);


        vid.ontimeupdate = function () {
            console.log("Duration: " + vid.duration + ". Shundann " + vid.currentTime + " sekund o'qildi");
            if (vid.duration == vid.currentTime) {
                $(document).ready(function () {
                    $.ajax({
                        type: "GET",
                        url: "{% url 'add_duration' %}",
                        data: {
                            'video': $('#test').val() // from form
                        },
                        success: function (message) {
                            alert(message);
                        }
                    });


                });
            }

        };
    };


</script>
</body>
</html>
